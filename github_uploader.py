from github import Github

# Access your GitHub account using your personal access token
# Replace 'YOUR_PERSONAL_ACCESS_TOKEN' with your actual access token
g = Github('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')

# Replace 'your-username' with your GitHub username and 'your-repo' with your repository name
repo = g.get_repo('https://github.com/Zabbist/PromptManagerv3')

# Specify the local directory containing the files to upload
local_directory = '/Users/macbook/Meus Ficheiros/Testes/ChatGPT EXT'

# Iterate over the files in the local directory
for filename in os.listdir(local_directory):
    # Construct the file path
    file_path = os.path.join(local_directory, filename)
    
    # Check if the file exists in the repository
    if repo.get_contents(filename):
        print(f"Skipping file: {filename} (already exists in the repository)")
    else:
        # Read the file content
        with open(file_path, 'r') as file:
            content = file.read()
        
        # Create the file in the repository
        repo.create_file(filename, "Upload file", content)
        
        print(f"Uploaded file: {filename}")
